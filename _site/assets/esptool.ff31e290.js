var M=Object.defineProperty;var O=(m,t,e)=>t in m?M(m,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):m[t]=e;var s=(m,t,e)=>(O(m,typeof t!="symbol"?t+"":t,e),e);import{p as V}from"./vendor.f5adc482.js";const $="modulepreload",tt=function(m){return"/"+m},X={},k=function(t,e,i){return!e||e.length===0?t():Promise.all(e.map(a=>{if(a=tt(a),a in X)return;X[a]=!0;const r=a.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${n}`))return;const A=document.createElement("link");if(A.rel=r?"stylesheet":$,r||(A.as="script",A.crossOrigin=""),A.href=a,document.head.appendChild(A),r)return new Promise((h,c)=>{A.addEventListener("load",h),A.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t())};class g extends Error{}class Q extends g{}class At{constructor(t,e=!1){this.device=t,this.tracing=e,this.slip_reader_enabled=!1,this.left_over=new Uint8Array(0)}hexdump(t){t=String.fromCharCode.apply(String,[].slice.call(t));const e=16,i=[],a="0123456789ABCDEF";for(let r=0;r<t.length;r+=e){const n=t.slice(r,Math.min(r+e,t.length)),A=("0000"+r.toString(16)).slice(-4);let h=n.split("").map(function(o){let u=o.charCodeAt(0);return" "+a[(240&u)>>4]+a[15&u]}).join("");h+="   ".repeat(e-n.length);let c=n.replace(/[\x00-\x1F\x20]/g,".");c+=" ".repeat(e-n.length),i.push(A+" "+h+"  "+c)}return i.join(`
`)}get_info(){const t=this.device.getInfo();return"WebSerial VendorID 0x"+t.usbVendorId.toString(16)+" ProductID 0x"+t.usbProductId.toString(16)}slip_writer(t){var e=0,i=0,a=0;for(i=0;i<t.length;i++)(t[i]===192||t[i]===219)&&e++;var r=new Uint8Array(2+e+t.length);for(r[0]=192,a=1,i=0;i<t.length;i++,a++){if(t[i]===192){r[a++]=219,r[a]=220;continue}if(t[i]===219){r[a++]=219,r[a]=221;continue}r[a]=t[i]}return r[a]=192,r}async write(t){const e=this.device.writable.getWriter();var i=this.slip_writer(t);this.tracing&&(console.log("Write bytes"),console.log(this.hexdump(i))),await e.write(i.buffer),e.releaseLock()}_appendBuffer(t,e){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(e),t.byteLength),i.buffer}slip_reader(t){for(var e=0,i=0,a=0,r="init",n,A;e<t.length;){if(r==="init"&&t[e]==192){i=e+1,r="valid_data",e++;continue}if(r==="valid_data"&&t[e]==192){a=e-1,r="packet_complete";break}e++}if(r!=="packet_complete")return this.left_over=t,new Uint8Array(0);this.left_over=t.slice(a+2);var A=new Uint8Array(a-i+1),h=0;for(e=i;e<=a;e++,h++){if(t[e]===219&&t[e+1]===220){A[h]=192,e++;continue}if(t[e]===219&&t[e+1]===221){A[h]=219,e++;continue}A[h]=t[e]}return n=A.slice(0,h),n}async read({timeout:t=0,min_data:e=12}={}){console.log("Read with timeout "+t);let i,a=this.left_over;if(this.left_over=new Uint8Array(0),this.slip_reader_enabled){const A=this.slip_reader(a);if(A.length>0)return A;a=this.left_over,this.left_over=new Uint8Array(0)}const r=this.device.readable.getReader();try{t>0&&(i=setTimeout(function(){r.cancel()},t));do{const{value:A,done:h}=await r.read();if(h)throw this.left_over=a,new Q("Timeout");var n=new Uint8Array(this._appendBuffer(a.buffer,A.buffer));a=n}while(a.length<e)}finally{t>0&&clearTimeout(i),r.releaseLock()}if(this.tracing&&(console.log("Read bytes"),console.log(this.hexdump(a))),this.slip_reader_enabled){const A=this.slip_reader(a);return this.tracing&&(console.log("Read results"),console.log(this.hexdump(A))),A}return a}async rawRead({timeout:t=0}={}){if(this.left_over.length!=0){const a=this.left_over;return this.left_over=new Uint8Array(0),a}const e=this.device.readable.getReader();let i;try{t>0&&(i=setTimeout(function(){e.cancel()},t));const{value:a,done:r}=await e.read();if(r)throw new Q("Timeout");return this.tracing&&(console.log("Read bytes"),console.log(a)),a}finally{t>0&&clearTimeout(i),e.releaseLock()}}async setRTS(t){await this.device.setSignals({requestToSend:t})}async setDTR(t){await this.device.setSignals({dataTerminalReady:t})}async connect({baud:t=115200}={}){await this.device.open({baudRate:t}),this.baudrate=t,this.left_over=new Uint8Array(0)}async disconnect(){await this.device.close()}}const j={[15736195]:()=>k(()=>Promise.resolve().then(()=>et),void 0),[1763790959]:()=>k(()=>Promise.resolve().then(()=>z),void 0),[456216687]:()=>k(()=>Promise.resolve().then(()=>z),void 0),[9]:()=>k(()=>Promise.resolve().then(()=>at),void 0),[1990]:()=>k(()=>Promise.resolve().then(()=>it),void 0),[4293968129]:()=>k(()=>Promise.resolve().then(()=>st),void 0)};class ht{constructor(t,e,i,a=115200){s(this,"ESP_RAM_BLOCK",6144);s(this,"ESP_FLASH_BEGIN",2);s(this,"ESP_FLASH_DATA",3);s(this,"ESP_FLASH_END",4);s(this,"ESP_MEM_BEGIN",5);s(this,"ESP_MEM_END",6);s(this,"ESP_MEM_DATA",7);s(this,"ESP_WRITE_REG",9);s(this,"ESP_READ_REG",10);s(this,"ESP_SPI_ATTACH",13);s(this,"ESP_CHANGE_BAUDRATE",15);s(this,"ESP_FLASH_DEFL_BEGIN",16);s(this,"ESP_FLASH_DEFL_DATA",17);s(this,"ESP_FLASH_DEFL_END",18);s(this,"ESP_SPI_FLASH_MD5",19);s(this,"ESP_ERASE_FLASH",208);s(this,"ESP_ERASE_REGION",209);s(this,"ESP_RUN_USER_CODE",211);s(this,"ESP_IMAGE_MAGIC",233);s(this,"ESP_CHECKSUM_MAGIC",239);s(this,"ROM_INVALID_RECV_MSG",5);s(this,"ERASE_REGION_TIMEOUT_PER_MB",3e4);s(this,"ERASE_WRITE_TIMEOUT_PER_MB",4e4);s(this,"MD5_TIMEOUT_PER_MB",8e3);s(this,"CHIP_ERASE_TIMEOUT",12e4);s(this,"MAX_TIMEOUT",this.CHIP_ERASE_TIMEOUT*2);s(this,"CHIP_DETECT_MAGIC_REG_ADDR",1073745920);s(this,"DETECTED_FLASH_SIZES",{18:"256KB",19:"512KB",20:"1MB",21:"2MB",22:"4MB",23:"8MB",24:"16MB"});s(this,"checksum",function(t){var e,i=239;for(e=0;e<t.length;e++)i^=t[e];return i});s(this,"timeout_per_mb",function(t,e){var i=t*(e/1e6);return i<3e3?3e3:i});s(this,"flash_size_bytes",function(t){let e=-1;return t.indexOf("KB")!==-1?e=parseInt(t.slice(0,t.indexOf("KB")))*1024:t.indexOf("MB")!==-1&&(e=parseInt(t.slice(0,t.indexOf("MB")))*1024*1024),e});s(this,"parse_flash_size_arg",function(t){if(typeof this.chip.FLASH_SIZES[t]>"u")throw new g("Flash size "+t+" is not supported by this chip type. Supported sizes: "+this.chip.FLASH_SIZES);return this.chip.FLASH_SIZES[t]});s(this,"_update_image_flash_params",function(t,e,i,a,r){if(console.log("_update_image_flash_params "+i+" "+a+" "+r),t.length<8||e!=this.chip.BOOTLOADER_FLASH_OFFSET)return t;if(i==="keep"&&a==="keep"&&r==="keep")return console.log("Not changing the image"),t;let n=t[0],A=t[2],h=t[3];if(n!==this.ESP_IMAGE_MAGIC)return this.log("Warning: Image file at 0x"+e.toString(16)+" doesn't look like an image file, so not changing any flash settings."),t;if(a!=="keep"&&(A={qio:0,qout:1,dio:2,dout:3}[a]),a_flash_freq=h&15,r!=="keep"){let o={"40m":0,"26m":1,"20m":2,"80m":15};a_flash_freq=o[r]}a_flash_size=h&240,i!=="keep"&&(a_flash_size=this.parse_flash_size_arg(i));var c=A<<8|a_flash_freq+a_flash_size;return this.log("Flash params set to "+c.toString(16)),t[2]!==A<<8&&(t[2]=A<<8),t[3]!==a_flash_freq+a_flash_size&&(t[3]=a_flash_freq+a_flash_size),t});s(this,"hard_reset",async()=>{await this.transport.setDTR(!1),await this.transport.setRTS(!1),await this._sleep(100),await this.transport.setRTS(!0),await this._sleep(100),await this.transport.setRTS(!1)});s(this,"soft_reset",async()=>{if(!this.IS_STUB)await this.flash_begin(0,0),await this.flash_finish(!1);else{if(this.chip.CHIP_NAME!="ESP8266")throw new g("Soft resetting is currently only supported on ESP8266");await this.command({op:this.ESP_RUN_USER_CODE,wait_response:!1})}});this.transport=t,this.baudrate=e,this.terminal=i,this.rom_baudrate=a,this.IS_STUB=!1,this.chip=null,i&&this.terminal.clear(),this.log("esptool.js v0.1-dev"),this.log("Serial port "+this.transport.get_info())}_sleep(t){return new Promise(e=>setTimeout(e,t))}log(t){this.terminal?this.terminal.writeln(t):console.log(t)}write_char(t){this.terminal?this.terminal.write(t):console.log(t)}_short_to_bytearray(t){return[t&255,t>>8&255]}_int_to_bytearray(t){return[t&255,t>>8&255,t>>16&255,t>>24&255]}_bytearray_to_short(t,e){return t|e>>8}_bytearray_to_int(t,e,i,a){return t|e<<8|i<<16|a<<24}_appendBuffer(t,e){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(e),t.byteLength),i.buffer}_appendArray(t,e){var i=new Uint8Array(t.length+e.length);return i.set(t,0),i.set(e,t.length),i}ui8ToBstr(t){var e,i=t.length,a="";for(e=0;e<i;e++)a+=String.fromCharCode(t[e]);return a}bstrToUi8(t){for(var e,i=t.length,a=new Uint8Array(i),e=0;e<i;e++)a[e]=t.charCodeAt(e);return a}async flush_input(){try{await this.transport.readRaw({timeout:200})}catch{}}async command({op:t=null,data:e=[],chk:i=0,wait_response:a=!0,timeout:r=3e3}={}){if(t!=null){var n=new Uint8Array(8+e.length);n[0]=0,n[1]=t,n[2]=this._short_to_bytearray(e.length)[0],n[3]=this._short_to_bytearray(e.length)[1],n[4]=this._int_to_bytearray(i)[0],n[5]=this._int_to_bytearray(i)[1],n[6]=this._int_to_bytearray(i)[2],n[7]=this._int_to_bytearray(i)[3];var A;for(A=0;A<e.length;A++)n[8+A]=e[A];await this.transport.write(n)}if(a){for(let c=0;c<100;c++){var h=await this.transport.read({timeout:r});const o=h[0],u=h[1];this._bytearray_to_short(h[2],h[3]);const T=this._bytearray_to_int(h[4],h[5],h[6],h[7]),b=h.slice(8);if(o==1){if(t==null||u==t)return[T,b];if(b[0]!=0&&b[1]==this.ROM_INVALID_RECV_MSG)throw await this.flush_input(),new g("unsupported command error")}}throw new g("invalid response")}}async read_reg({addr:t,timeout:e=3e3}={}){var i,a=this._int_to_bytearray(t);return i=await this.command({op:this.ESP_READ_REG,data:a,timeout:e}),i[0]}async write_reg({addr:t,value:e,mask:i=4294967295,delay_us:a=0,delay_after_us:r=0}={}){var n=this._appendArray(this._int_to_bytearray(t),this._int_to_bytearray(e));n=this._appendArray(n,this._int_to_bytearray(i)),n=this._appendArray(n,this._int_to_bytearray(a)),r>0&&(n=this._appendArray(n,this._int_to_bytearray(this.chip.UART_DATE_REG_ADDR)),n=this._appendArray(n,this._int_to_bytearray(0)),n=this._appendArray(n,this._int_to_bytearray(0)),n=this._appendArray(n,this._int_to_bytearray(r))),await this.check_command({op_description:"write target memory",op:this.ESP_WRITE_REG,data:n})}async sync(){console.log("Sync");var t=new Uint8Array(36),e;for(t[0]=7,t[1]=7,t[2]=18,t[3]=32,e=0;e<32;e++)t[4+e]=85;try{return await this.command({op:8,data:t,timeout:100})}catch(i){throw console.log("Sync err "+i),i}}async _connect_attempt({mode:t="default_reset",esp32r0_delay:e=!1}={}){console.log("_connect_attempt "+t+" "+e),t!=="no_reset"&&(await this.transport.setDTR(!1),await this.transport.setRTS(!0),await this._sleep(100),e&&await this._sleep(2e3),await this.transport.setDTR(!0),await this.transport.setRTS(!1),await this._sleep(50),await this.transport.setDTR(!1));for(var i=0;;){try{i+=(await this.transport.read({timeout:1e3})).length}catch(r){if(r instanceof Q)break}await this._sleep(50)}this.transport.slip_reader_enabled=!0;for(var i=7;i--;){try{var a=await this.sync();return"success"}catch(r){r instanceof Q&&(e?this.write_char("_"):this.write_char("."))}await this._sleep(50)}return"error"}async connect({mode:t="default_reset",attempts:e=7,detecting:i=!1}={}){var a,r;for(this.chip=null,this.write_char("Connecting..."),await this.transport.connect({baud:this.rom_baudrate}),a=0;a<e&&(r=await this._connect_attempt({mode:t,esp32r0_delay:!1}),!(r==="success"||(r=await this._connect_attempt({mode:t,esp32r0_delay:!0}),r==="success")));a++);if(r!=="success")throw new g("Failed to connect with the device");if(this.write_char(`
`),this.write_char("\r"),await this.flush_input(),!i){var n=await this.read_reg({addr:1073745920})>>>0;if(console.log("Chip Magic "+n.toString(16)),n in j)this.chip=(await j[n]()).default;else throw new g(`Unexpected CHIP magic value ${n}. Failed to autodetect chip type.`)}}async detect_chip({mode:t="default_reset"}={}){await this.connect({mode:t}),this.write_char("Detecting chip type... "),this.chip!=null&&this.log(this.chip.CHIP_NAME)}async check_command({op_description:t="",op:e=null,data:i=[],chk:a=0,timeout:r=3e3}={}){console.log("check_command "+t);var n=await this.command({op:e,data:i,chk:a,timeout:r});return n[1].length>4?n[1]:n[0]}async mem_begin(t,e,i,a){console.log("mem_begin "+t+" "+e+" "+i+" "+a.toString(16));var r=this._appendArray(this._int_to_bytearray(t),this._int_to_bytearray(e));r=this._appendArray(r,this._int_to_bytearray(i)),r=this._appendArray(r,this._int_to_bytearray(a)),await this.check_command({op_description:"enter RAM download mode",op:this.ESP_MEM_BEGIN,data:r})}async mem_block(t,e){var i=this._appendArray(this._int_to_bytearray(t.length),this._int_to_bytearray(e));i=this._appendArray(i,this._int_to_bytearray(0)),i=this._appendArray(i,this._int_to_bytearray(0)),i=this._appendArray(i,t);var a=this.checksum(t);await this.check_command({op_description:"write to target RAM",op:this.ESP_MEM_DATA,data:i,chk:a})}async mem_finish(t){var e=t===0?1:0,i=this._appendArray(this._int_to_bytearray(e),this._int_to_bytearray(t));await this.check_command({op_description:"leave RAM download mode",op:this.ESP_MEM_END,data:i,timeout:50})}async flash_spi_attach(t){var e=this._int_to_bytearray(t);await this.check_command({op_description:"configure SPI flash pins",op:this.ESP_SPI_ATTACH,data:e})}async flash_begin(t,e){var i=Math.floor((t+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),a=this.chip.get_erase_size(e,t),r=new Date,n=r.getTime(),A=3e3;this.IS_STUB==!1&&(A=this.timeout_per_mb(this.ERASE_REGION_TIMEOUT_PER_MB,t)),console.log("flash begin "+a+" "+i+" "+this.FLASH_WRITE_SIZE+" "+e+" "+t);var h=this._appendArray(this._int_to_bytearray(a),this._int_to_bytearray(i));h=this._appendArray(h,this._int_to_bytearray(this.FLASH_WRITE_SIZE)),h=this._appendArray(h,this._int_to_bytearray(e)),this.IS_STUB==!1&&(h=this._appendArray(h,this._int_to_bytearray(0))),await this.check_command({op_description:"enter Flash download mode",op:this.ESP_FLASH_BEGIN,data:h,timeout:A});var c=r.getTime();return t!=0&&this.IS_STUB==!1&&this.log("Took "+(c-n)/1e3+"."+(c-n)%1e3+"s to erase flash block"),i}async flash_defl_begin(t,e,i){var a=Math.floor((e+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),r=Math.floor((t+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),n=new Date,A=n.getTime();let h,c;this.IS_STUB?(h=t,c=3e3):(h=r*this.FLASH_WRITE_SIZE,c=this.timeout_per_mb(this.ERASE_REGION_TIMEOUT_PER_MB,h)),this.log("Compressed "+t+" bytes to "+e+"...");var o=this._appendArray(this._int_to_bytearray(h),this._int_to_bytearray(a));o=this._appendArray(o,this._int_to_bytearray(this.FLASH_WRITE_SIZE)),o=this._appendArray(o,this._int_to_bytearray(i)),(this.chip.CHIP_NAME==="ESP32-S2"||this.chip.CHIP_NAME==="ESP32-S3"||this.chip.CHIP_NAME==="ESP32-C3")&&this.IS_STUB===!1&&(o=this._appendArray(o,this._int_to_bytearray(0))),await this.check_command({op_description:"enter compressed flash mode",op:this.ESP_FLASH_DEFL_BEGIN,data:o,timeout:c});var u=n.getTime();return t!=0&&this.IS_STUB===!1&&this.log("Took "+(u-A)/1e3+"."+(u-A)%1e3+"s to erase flash block"),a}async flash_block(t,e,i){var a=this._appendArray(this._int_to_bytearray(t.length),this._int_to_bytearray(e));a=this._appendArray(a,this._int_to_bytearray(0)),a=this._appendArray(a,this._int_to_bytearray(0)),a=this._appendArray(a,t);var r=this.checksum(t);await this.check_command({op_description:"write to target Flash after seq "+e,op:this.ESP_FLASH_DATA,data:a,chk:r,timeout:i})}async flash_defl_block(t,e,i){var a=this._appendArray(this._int_to_bytearray(t.length),this._int_to_bytearray(e));a=this._appendArray(a,this._int_to_bytearray(0)),a=this._appendArray(a,this._int_to_bytearray(0)),a=this._appendArray(a,t);var r=this.checksum(t);console.log("flash_defl_block "+t[0].toString(16),+" "+t[1].toString(16)),await this.check_command({op_description:"write compressed data to flash after seq "+e,op:this.ESP_FLASH_DEFL_DATA,data:a,chk:r,timeout:i})}async flash_finish({reboot:t=!1}={}){var e=t?0:1,i=this._int_to_bytearray(e);await this.check_command({op_description:"leave Flash mode",op:this.ESP_FLASH_END,data:i})}async flash_defl_finish({reboot:t=!1}={}){var e=t?0:1,i=this._int_to_bytearray(e);await this.check_command({op_description:"leave compressed flash mode",op:this.ESP_FLASH_DEFL_END,data:i})}async run_spiflash_command(t,e,i){var a=-2147483648,r=1<<28,n=1<<27,A=this.chip.SPI_REG_BASE,h=A+0,c=A+this.chip.SPI_USR_OFFS,o=A+this.chip.SPI_USR1_OFFS,u=A+this.chip.SPI_USR2_OFFS,T=A+this.chip.SPI_W0_OFFS,b;this.chip.SPI_MOSI_DLEN_OFFS!=null?b=async(N,G)=>{var Z=A+this.chip.SPI_MOSI_DLEN_OFFS,R=A+this.chip.SPI_MISO_DLEN_OFFS;N>0&&await this.write_reg({addr:Z,value:N-1}),G>0&&await this.write_reg({addr:R,value:G-1})}:b=async(N,G)=>{var Z=o,R=17,q=8,Y=N===0?0:N-1,P=G===0?0:G-1,J=P<<q|Y<<R;await this.write_reg({addr:Z,value:J})};var D=1<<18,U=28;if(i>32)throw new g("Reading more than 32 bits back from a SPI flash operation is unsupported");if(e.length>64)throw new g("Writing more than 64 bytes of data with one SPI command is unsupported");var B=e.length*8,L=await this.read_reg({addr:c}),C=await this.read_reg({addr:u}),H=a,I;i>0&&(H|=r),B>0&&(H|=n),await b(B,i),await this.write_reg({addr:c,value:H});var F=7<<U|t;if(await this.write_reg({addr:u,value:F}),B==0)await this.write_reg({addr:T,value:0});else{if(e.length%4!=0){var W=new Uint8Array(e.length%4);e=this._appendArray(e,W)}var S=T;for(I=0;I<e.length-4;I+=4)F=this._bytearray_to_int(e[I],e[I+1],e[I+2],e[I+3]),await this.write_reg({addr:S,value:F}),S+=4}for(await this.write_reg({addr:h,value:D}),I=0;I<10&&(F=await this.read_reg({addr:h})&D,F!=0);I++);if(I===10)throw new g("SPI command did not complete in time");var K=await this.read_reg({addr:T});return await this.write_reg({addr:c,value:L}),await this.write_reg({addr:u,value:C}),K}async read_flash_id(){var t=159,e=new Uint8Array(0);return await this.run_spiflash_command(t,e,24)}async erase_flash(){this.log("Erasing flash (this may take a while)...");var t=new Date;let e=t.getTime(),i=await this.check_command({op_description:"erase flash",op:this.ESP_ERASE_FLASH,timeout:this.CHIP_ERASE_TIMEOUT});t=new Date;let a=t.getTime();return this.log("Chip erase completed successfully in "+(a-e)/1e3+"s"),i}toHex(t){return Array.prototype.map.call(t,e=>("00"+e.toString(16)).slice(-2)).join("")}async flash_md5sum(t,e){let i=this.timeout_per_mb(this.MD5_TIMEOUT_PER_MB,e);var a=this._appendArray(this._int_to_bytearray(t),this._int_to_bytearray(e));a=this._appendArray(a,this._int_to_bytearray(0)),a=this._appendArray(a,this._int_to_bytearray(0));let r=await this.check_command({op_description:"calculate md5sum",op:this.ESP_SPI_FLASH_MD5,data:a,timeout:i});return r.length>16&&(r=r.slice(0,16)),this.toHex(r)}async run_stub(){this.log("Uploading stub...");var t=atob(this.chip.ROM_TEXT),e=t.split("").map(function(o){return o.charCodeAt(0)}),i=new Uint8Array(e),a=V.inflate(i);t=atob(this.chip.ROM_DATA),e=t.split("").map(function(o){return o.charCodeAt(0)});var r=new Uint8Array(e),n=Math.floor((a.length+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK),A;for(await this.mem_begin(a.length,n,this.ESP_RAM_BLOCK,this.chip.TEXT_START),A=0;A<n;A++){var h=A*this.ESP_RAM_BLOCK,c=h+this.ESP_RAM_BLOCK;await this.mem_block(a.slice(h,c),A)}for(n=Math.floor((r.length+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK),await this.mem_begin(r.length,n,this.ESP_RAM_BLOCK,this.chip.DATA_START),A=0;A<n;A++){var h=A*this.ESP_RAM_BLOCK,c=h+this.ESP_RAM_BLOCK;await this.mem_block(r.slice(h,c),A)}this.log("Running stub..."),await this.mem_finish(this.chip.ENTRY);for(let o=0;o<100;o++){const u=await this.transport.read({timeout:1e3,min_data:6});if(u[0]===79&&u[1]===72&&u[2]===65&&u[3]===73)return this.log("Stub running..."),this.IS_STUB=!0,this.FLASH_WRITE_SIZE=16384,this.chip}throw new g("Failed to start stub. Unexpected response")}async change_baud(){this.log("Changing baudrate to "+this.baudrate);let t=this.IS_STUB?this.transport.baudrate:0,e=this._appendArray(this._int_to_bytearray(this.baudrate),this._int_to_bytearray(t));await this.command({op:this.ESP_CHANGE_BAUDRATE,data:e}),this.log("Changed"),await this.transport.disconnect(),await this._sleep(50),await this.transport.connect({baud:this.baudrate});try{await this.transport.rawRead({timeout:500})}catch{}}async main_fn({mode:t="default_reset"}={}){await this.detect_chip({mode:t});var e=await this.chip.get_chip_description(this);return this.log("Chip is "+e),this.log("Features: "+await this.chip.get_chip_features(this)),this.log("Crystal is "+await this.chip.get_crystal_freq(this)+"MHz"),this.log("MAC: "+await this.chip.read_mac(this)),await this.chip.read_mac(this),typeof this.chip._post_connect<"u"&&await this.chip._post_connect(this),await this.run_stub(),await this.change_baud(),e}async write_flash({fileArray:t=[],flash_size:e="keep",flash_mode:i="keep",flash_freq:a="keep",erase_all:r=!1,compress:n=!0,reportProgress:A=void 0,calculateMD5Hash:h=void 0}){if(console.log("EspLoader program"),e!=="keep"){let b=this.flash_size_bytes(e);for(var c=0;c<t.length;c++)if(t[c].data.length+t[c].address>b)throw new g(`File ${c+1} doesn't fit in the available flash`)}this.IS_STUB===!0&&r===!0&&await this.erase_flash();let o,u;for(var c=0;c<t.length;c++){if(console.log("Data Length "+t[c].data.length),o=t[c].data+"\xFF\xFF\xFF\xFF".substring(0,4-t[c].data.length%4),u=t[c].address,console.log("Image Length "+o.length),o.length===0){this.log("Warning: File is empty");continue}o=this._update_image_flash_params(o,u,e,i,a);let D;h&&(D=h(o),console.log("Image MD5 "+D));let U=o.length,B;if(n){let S=this.bstrToUi8(o);o=V.deflate(S,{level:9}),console.log("Compressed image "),console.log(o),B=await this.flash_defl_begin(U,o.length,u)}else B=await this.flash_begin(U,u);let L=0,C=0;const H=o.length;A&&A(c,0,H);var T=new Date;let I=T.getTime(),F=5e3;for(;o.length>0;){console.log("Write loop "+u+" "+L+" "+B),this.log("Writing at 0x"+(u+L*this.FLASH_WRITE_SIZE).toString(16)+"... ("+Math.floor(100*(L+1)/B)+"%)");let S=o.slice(0,this.FLASH_WRITE_SIZE);if(n){let K=5e3;this.IS_STUB===!1&&(F=K),await this.flash_defl_block(S,L,F),this.IS_STUB&&(F=K)}else throw new g("Yet to handle Non Compressed writes");C+=S.length,o=o.slice(this.FLASH_WRITE_SIZE,o.length),L++,A&&A(c,C,H)}this.IS_STUB&&await this.read_reg({addr:this.CHIP_DETECT_MAGIC_REG_ADDR,timeout:F}),T=new Date;let W=T.getTime()-I;if(n&&this.log("Wrote "+U+" bytes ("+C+" compressed) at 0x"+u.toString(16)+" in "+W/1e3+" seconds."),h){let S=await this.flash_md5sum(u,U);if(new String(S).valueOf()!=new String(D).valueOf())throw this.log("File  md5: "+D),this.log("Flash md5: "+S),new g("MD5 of file does not match data in flash!");this.log("Hash of data verified.")}}this.log("Leaving..."),this.IS_STUB&&(await this.flash_begin(0,0),n?await this.flash_defl_finish():await this.flash_finish())}async flash_id(){console.log("flash_id");var t=await this.read_flash_id();this.log("Manufacturer: "+(t&255).toString(16));var e=t>>16&255;this.log("Device: "+(t>>8&255).toString(16)+e.toString(16)),this.log("Detected flash size: "+this.DETECTED_FLASH_SIZES[e])}}const v=class{static _d2h(t){var e=(+t).toString(16);return e.length===1?"0"+e:e}};let _=v;s(_,"CHIP_NAME","ESP32"),s(_,"IMAGE_CHIP_ID",0),s(_,"EFUSE_RD_REG_BASE",1073061888),s(_,"DR_REG_SYSCON_BASE",1073111040),s(_,"UART_CLKDIV_REG",1072955412),s(_,"UART_CLKDIV_MASK",1048575),s(_,"UART_DATE_REG_ADDR",1610612856),s(_,"XTAL_CLK_DIVIDER",1),s(_,"FLASH_WRITE_SIZE",1024),s(_,"BOOTLOADER_FLASH_OFFSET",4096),s(_,"FLASH_SIZES",{"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64}),s(_,"SPI_REG_BASE",1072963584),s(_,"SPI_USR_OFFS",28),s(_,"SPI_USR1_OFFS",32),s(_,"SPI_USR2_OFFS",36),s(_,"SPI_W0_OFFS",128),s(_,"SPI_MOSI_DLEN_OFFS",40),s(_,"SPI_MISO_DLEN_OFFS",44),s(_,"TEXT_START",1074520064),s(_,"ENTRY",1074521496),s(_,"DATA_START",1073605544),s(_,"ROM_DATA","CMD8Pw=="),s(_,"ROM_TEXT","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"),s(_,"read_efuse",async(t,e)=>{var i=v.EFUSE_RD_REG_BASE+4*e;return console.log("Read efuse "+i),await t.read_reg({addr:i})}),s(_,"get_pkg_version",async t=>{var e=await v.read_efuse(t,3),i=e>>9&7;return i+=(e>>2&1)<<3,i}),s(_,"get_chip_revision",async t=>{var e=await v.read_efuse(t,3),i=await v.read_efuse(t,5),a=await t.read_reg({addr:v.DR_REG_SYSCON_BASE+124}),r=e>>15&1,n=i>>20&1,A=a>>31&1;return r!=0?n!=0?A!=0?3:2:1:0}),s(_,"get_chip_description",async t=>{var e=["ESP32-D0WDQ6","ESP32-D0WD","ESP32-D2WD","","ESP32-U4WDH","ESP32-PICO-D4","ESP32-PICO-V3-02"],i="",a=await v.get_pkg_version(t),r=await v.get_chip_revision(t),n=r==3,A=await v.read_efuse(t,3)&1<<0;return A!=0&&(e[0]="ESP32-S0WDQ6",e[1]="ESP32-S0WD"),n&&(e[5]="ESP32-PICO-V3"),a>=0&&a<=6?i=e[a]:i="Unknown ESP32",n&&(a===0||a===1)&&(i+="-V3"),i+" (revision "+r+")"}),s(_,"get_chip_features",async t=>{var e=["Wi-Fi"],i=await v.read_efuse(t,3),a=i&1<<1;a===0&&e.push(" BT");var r=i&1<<0;r!==0?e.push(" Single Core"):e.push(" Dual Core");var n=i&1<<13;if(n!==0){var A=i&4096;A!==0?e.push(" 160MHz"):e.push(" 240MHz")}var h=await v.get_pkg_version(t);[2,4,5,6].includes(h)&&e.push(" Embedded Flash"),h===6&&e.push(" Embedded PSRAM");var c=await v.read_efuse(t,4),o=c>>8&31;o!==0&&e.push(" VRef calibration in efuse");var u=i>>14&1;u!==0&&e.push(" BLK3 partially reserved");var T=await v.read_efuse(t,6),b=T&3,D=["None","3/4","Repeat (UNSUPPORTED)","Invalid"];return e.push(" Coding Scheme "+D[b]),e}),s(_,"get_crystal_freq",async t=>{var e=await t.read_reg({addr:v.UART_CLKDIV_REG})&v.UART_CLKDIV_MASK,i=t.transport.baudrate*e/1e6/v.XTAL_CLK_DIVIDER,a;return i>33?a=40:a=26,Math.abs(a-i)>1&&t.log("WARNING: Unsupported crystal in use"),a}),s(_,"read_mac",async t=>{var e=await v.read_efuse(t,1);e=e>>>0;var i=await v.read_efuse(t,2);i=i>>>0;var a=new Uint8Array(6);return a[0]=i>>8&255,a[1]=i&255,a[2]=e>>24&255,a[3]=e>>16&255,a[4]=e>>8&255,a[5]=e&255,v._d2h(a[0])+":"+v._d2h(a[1])+":"+v._d2h(a[2])+":"+v._d2h(a[3])+":"+v._d2h(a[4])+":"+v._d2h(a[5])}),s(_,"get_erase_size",function(t,e){return e});const et=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"})),w=class{static _d2h(t){var e=(+t).toString(16);return e.length===1?"0"+e:e}};let f=w;s(f,"CHIP_NAME","ESP32-C3"),s(f,"IMAGE_CHIP_ID",5),s(f,"EFUSE_BASE",1610647552),s(f,"MAC_EFUSE_REG",w.EFUSE_BASE+68),s(f,"UART_CLKDIV_REG",1072955412),s(f,"UART_CLKDIV_MASK",1048575),s(f,"UART_DATE_REG_ADDR",1610612860),s(f,"FLASH_WRITE_SIZE",1024),s(f,"BOOTLOADER_FLASH_OFFSET",4096),s(f,"FLASH_SIZES",{"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64}),s(f,"SPI_REG_BASE",1610620928),s(f,"SPI_USR_OFFS",24),s(f,"SPI_USR1_OFFS",28),s(f,"SPI_USR2_OFFS",32),s(f,"SPI_MOSI_DLEN_OFFS",36),s(f,"SPI_MISO_DLEN_OFFS",40),s(f,"SPI_W0_OFFS",88),s(f,"TEXT_START",1077411840),s(f,"ENTRY",1077413320),s(f,"DATA_START",1070164904),s(f,"ROM_DATA","DEDIPw=="),s(f,"ROM_TEXT","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"),s(f,"get_pkg_version",async t=>{var e=3,i=w.EFUSE_BASE+68,a=i+4*e,r=await t.read_reg({addr:a}),n=r>>21&7;return n}),s(f,"get_chip_revision",async t=>{var e=w.EFUSE_BASE+68,i=3,a=18,r=e+4*i,n=(await t.read_reg({addr:r})&7<<a)>>a;return n}),s(f,"get_chip_description",async t=>{var e,i=await w.get_pkg_version(t);i===0?e="ESP32-C3":e="unknown ESP32-C3";var a=await w.get_chip_revision(t);return e+=" (revision "+a+")",e}),s(f,"get_chip_features",async t=>["Wi-Fi"]),s(f,"get_crystal_freq",async t=>40),s(f,"read_mac",async t=>{var e=await t.read_reg({addr:w.MAC_EFUSE_REG});e=e>>>0;var i=await t.read_reg({addr:w.MAC_EFUSE_REG+4});i=i>>>0&65535;var a=new Uint8Array(6);return a[0]=i>>8&255,a[1]=i&255,a[2]=e>>24&255,a[3]=e>>16&255,a[4]=e>>8&255,a[5]=e&255,w._d2h(a[0])+":"+w._d2h(a[1])+":"+w._d2h(a[2])+":"+w._d2h(a[3])+":"+w._d2h(a[4])+":"+w._d2h(a[5])}),s(f,"get_erase_size",function(t,e){return e});const z=Object.freeze(Object.defineProperty({__proto__:null,default:f},Symbol.toStringTag,{value:"Module"})),E=class{static _d2h(t){var e=(+t).toString(16);return e.length===1?"0"+e:e}};let l=E;s(l,"CHIP_NAME","ESP32-S3"),s(l,"IMAGE_CHIP_ID",9),s(l,"EFUSE_BASE",1610641408),s(l,"MAC_EFUSE_REG",E.EFUSE_BASE+68),s(l,"UART_CLKDIV_REG",1610612756),s(l,"UART_CLKDIV_MASK",1048575),s(l,"UART_DATE_REG_ADDR",1610612864),s(l,"FLASH_WRITE_SIZE",1024),s(l,"BOOTLOADER_FLASH_OFFSET",4096),s(l,"FLASH_SIZES",{"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64}),s(l,"SPI_REG_BASE",1610620928),s(l,"SPI_USR_OFFS",24),s(l,"SPI_USR1_OFFS",28),s(l,"SPI_USR2_OFFS",32),s(l,"SPI_MOSI_DLEN_OFFS",36),s(l,"SPI_MISO_DLEN_OFFS",40),s(l,"SPI_W0_OFFS",88),s(l,"USB_RAM_BLOCK",2048),s(l,"UARTDEV_BUF_NO_USB",3),s(l,"UARTDEV_BUF_NO",1070526796),s(l,"TEXT_START",1077379072),s(l,"ENTRY",1077381496),s(l,"DATA_START",1070279668),s(l,"ROM_DATA","CADKPw=="),s(l,"ROM_TEXT","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"),s(l,"get_chip_description",async t=>"ESP32-S3"),s(l,"get_chip_features",async t=>["Wi-Fi","BLE"]),s(l,"get_crystal_freq",async t=>40),s(l,"_post_connect",async t=>{var e=await t.read_reg({addr:E.UARTDEV_BUF_NO})&255;console.log("In _post_connect "+e),e==E.UARTDEV_BUF_NO_USB&&(t.ESP_RAM_BLOCK=E.USB_RAM_BLOCK)}),s(l,"read_mac",async t=>{var e=await t.read_reg({addr:E.MAC_EFUSE_REG});e=e>>>0;var i=await t.read_reg({addr:E.MAC_EFUSE_REG+4});i=i>>>0&65535;var a=new Uint8Array(6);return a[0]=i>>8&255,a[1]=i&255,a[2]=e>>24&255,a[3]=e>>16&255,a[4]=e>>8&255,a[5]=e&255,E._d2h(a[0])+":"+E._d2h(a[1])+":"+E._d2h(a[2])+":"+E._d2h(a[3])+":"+E._d2h(a[4])+":"+E._d2h(a[5])}),s(l,"get_erase_size",function(t,e){return e});const at=Object.freeze(Object.defineProperty({__proto__:null,default:l},Symbol.toStringTag,{value:"Module"})),x=class{static _d2h(t){var e=(+t).toString(16);return e.length===1?"0"+e:e}};let d=x;s(d,"CHIP_NAME","ESP32-S2"),s(d,"IMAGE_CHIP_ID",2),s(d,"MAC_EFUSE_REG",1061265476),s(d,"EFUSE_BASE",1061265408),s(d,"UART_CLKDIV_REG",1061158932),s(d,"UART_CLKDIV_MASK",1048575),s(d,"UART_DATE_REG_ADDR",1610612856),s(d,"FLASH_WRITE_SIZE",1024),s(d,"BOOTLOADER_FLASH_OFFSET",4096),s(d,"FLASH_SIZES",{"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64}),s(d,"SPI_REG_BASE",1061167104),s(d,"SPI_USR_OFFS",24),s(d,"SPI_USR1_OFFS",28),s(d,"SPI_USR2_OFFS",32),s(d,"SPI_W0_OFFS",88),s(d,"SPI_MOSI_DLEN_OFFS",36),s(d,"SPI_MISO_DLEN_OFFS",40),s(d,"TEXT_START",1073905664),s(d,"ENTRY",1073907516),s(d,"DATA_START",1073622004),s(d,"ROM_DATA","CAD9Pw=="),s(d,"ROM_TEXT","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"),s(d,"get_pkg_version",async t=>{var e=3,i=x.EFUSE_BASE+68,a=i+4*e,r=await t.read_reg({addr:a}),n=r>>21&15;return n}),s(d,"get_chip_description",async t=>{var e=["ESP32-S2","ESP32-S2FH16","ESP32-S2FH32"],i=await x.get_pkg_version(t);return i>=0&&i<=2?e[i]:"unknown ESP32-S2"}),s(d,"get_chip_features",async t=>{var e=["Wi-Fi"],i=await x.get_pkg_version(t);i==1?e.push("Embedded 2MB Flash"):i==2&&e.push("Embedded 4MB Flash");var a=4,r=x.EFUSE_BASE+92,n=r+4*a,A=await t.read_reg({addr:n}),h=A>>4&7;return h==1&&e.push("ADC and temperature sensor calibration in BLK2 of efuse"),e}),s(d,"get_crystal_freq",async t=>40),s(d,"read_mac",async t=>{var e=await t.read_reg({addr:x.MAC_EFUSE_REG});e=e>>>0;var i=await t.read_reg({addr:x.MAC_EFUSE_REG+4});i=i>>>0&65535;var a=new Uint8Array(6);return a[0]=i>>8&255,a[1]=i&255,a[2]=e>>24&255,a[3]=e>>16&255,a[4]=e>>8&255,a[5]=e&255,x._d2h(a[0])+":"+x._d2h(a[1])+":"+x._d2h(a[2])+":"+x._d2h(a[3])+":"+x._d2h(a[4])+":"+x._d2h(a[5])}),s(d,"get_erase_size",function(t,e){return e});const it=Object.freeze(Object.defineProperty({__proto__:null,default:d},Symbol.toStringTag,{value:"Module"})),y=class{static _d2h(t){var e=(+t).toString(16);return e.length===1?"0"+e:e}};let p=y;s(p,"CHIP_NAME","ESP8266"),s(p,"CHIP_DETECT_MAGIC_VALUE",[4293968129]),s(p,"EFUSE_RD_REG_BASE",1072693328),s(p,"UART_CLKDIV_REG",1610612756),s(p,"UART_CLKDIV_MASK",1048575),s(p,"XTAL_CLK_DIVIDER",2),s(p,"FLASH_WRITE_SIZE",16384),s(p,"BOOTLOADER_FLASH_OFFSET",0),s(p,"FLASH_SIZES",{"512KB":0,"256KB":16,"1MB":32,"2MB":48,"4MB":64,"2MB-c1":80,"4MB-c1":96,"8MB":128,"16MB":144}),s(p,"SPI_REG_BASE",1610613248),s(p,"SPI_USR_OFFS",28),s(p,"SPI_USR1_OFFS",32),s(p,"SPI_USR2_OFFS",36),s(p,"SPI_MOSI_DLEN_OFFS",null),s(p,"SPI_MISO_DLEN_OFFS",null),s(p,"SPI_W0_OFFS",64),s(p,"TEXT_START",1074847744),s(p,"ENTRY",1074847748),s(p,"DATA_START",1073720488),s(p,"ROM_DATA","CIH+PwUFBAACAwcAAwMLAFHnEECH5xBAtecQQFToEEAF9xBAuugQQBDpEEBc6RBABfcQQCLqEECf6hBAYOsQQAX3EEAF9xBA+OsQQAX3EEDX7hBAn+8QQNjvEEAF9xBABfcQQHXwEEAF9xBAW/EQQAHyEEBA8xBA//MQQND0EEAF9xBABfcQQAX3EEAF9xBA/vUQQAX3EED09hBAL+0QQCfoEEBC9RBAS+oQQJjpEEAF9xBAiPYQQM/2EEAF9xBABfcQQAX3EEAF9xBABfcQQAX3EEAF9xBABfcQQMDpEED/6RBAWvUQQAEAAAACAAAAAwAAAAQAAAAFAAAABwAAAAkAAAANAAAAEQAAABkAAAAhAAAAMQAAAEEAAABhAAAAgQAAAMEAAAABAQAAgQEAAAECAAABAwAAAQQAAAEGAAABCAAAAQwAAAEQAAABGAAAASAAAAEwAAABQAAAAWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAAAAAAAAAAAAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAANAAAADwAAABEAAAATAAAAFwAAABsAAAAfAAAAIwAAACsAAAAzAAAAOwAAAEMAAABTAAAAYwAAAHMAAACDAAAAowAAAMMAAADjAAAAAgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAgAAAAMAAAADAAAAAwAAAAMAAAAEAAAABAAAAAQAAAAEAAAABQAAAAUAAAAFAAAABQAAAAAAAAAAAAAAAAAAABAREgAIBwkGCgULBAwDDQIOAQ8AAQEAAAEAAAAEAAAA"),s(p,"ROM_TEXT","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"),s(p,"read_efuse",async(t,e)=>{var i=y.EFUSE_RD_REG_BASE+4*e;return console.log("Read efuse "+i),await t.read_reg({addr:i})}),s(p,"get_chip_description",async t=>{var e=await y.read_efuse(t,2),i=await y.read_efuse(t,0),a=(i&1<<4|e&1<<16)!=0;return a?"ESP8285":"ESP8266EX"}),s(p,"get_chip_features",async t=>{var e=["WiFi"];return await y.get_chip_description(t)=="ESP8285"&&e.push("Embedded Flash"),e}),s(p,"get_crystal_freq",async t=>{var e=await t.read_reg({addr:y.UART_CLKDIV_REG})&y.UART_CLKDIV_MASK,i=t.transport.baudrate*e/1e6/y.XTAL_CLK_DIVIDER,a;return i>33?a=40:a=26,Math.abs(a-i)>1&&t.log("WARNING: Detected crystal freq "+i+"MHz is quite different to normalized freq "+a+"MHz. Unsupported crystal in use?"),a}),s(p,"read_mac",async t=>{var e=await y.read_efuse(t,0);e=e>>>0;var i=await y.read_efuse(t,1);i=i>>>0;var a=await y.read_efuse(t,3);a=a>>>0;var r=new Uint8Array(6);return a!=0?(r[0]=a>>16&255,r[1]=a>>8&255,r[2]=a&255):(i>>16&255)==0?(r[0]=24,r[1]=254,r[2]=52):(i>>16&255)==1?(r[0]=172,r[1]=208,r[2]=116):t.log("Unknown OUI"),r[3]=i>>8&255,r[4]=i&255,r[5]=e>>24&255,y._d2h(r[0])+":"+y._d2h(r[1])+":"+y._d2h(r[2])+":"+y._d2h(r[3])+":"+y._d2h(r[4])+":"+y._d2h(r[5])}),s(p,"get_erase_size",function(t,e){return e});const st=Object.freeze(Object.defineProperty({__proto__:null,default:p},Symbol.toStringTag,{value:"Module"}));export{ht as E,At as T,k as _};
